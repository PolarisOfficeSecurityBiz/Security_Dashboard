<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/admin_layout}">
<head>
  <meta charset="UTF-8" />
  <title>SecuOne 로그 통계</title>

  <!-- ✅ 스타일 -->
  <link rel="stylesheet" th:href="@{/css/secuone_logs.css}" />

  <!-- ✅ Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- ✅ 외부 JS -->
  <script defer th:src="@{/js/secuone_logs.js}"></script>
</head>

<body>
<div layout:fragment="content" class="secuone-log-page">

  <!-- 🔹 헤더 -->
  <div class="header">
    <div>
      <a th:href="@{/admin/secuone}">Polaris SecuOne</a> / 
      <strong>로그 통계</strong>
    </div>
  </div>

  <!-- 🔹 필터 영역 -->
  <div class="filter-bar">
    <select id="dateRange">
      <option value="1d">하루</option>
      <option value="7d" selected>일주일</option>
      <option value="30d">한 달</option>
      <option value="custom">직접 선택</option>
    </select>
    <input type="date" id="fromDate" disabled />
    <input type="date" id="toDate" disabled />
    <button id="searchBtn">검색</button>
  </div>

  <!-- ======================== ℹ️ 요약 카드 ======================== -->
  <div class="summary-cards">
    <div class="card">
      <h4>Malware 탐지</h4>
      <p id="todayCount">-</p>
    </div>
    <div class="card">
      <h4>Remote 감지</h4>
      <p id="featureCount">-</p>
    </div>
    <div class="card">
      <h4>Rooting 탐지</h4>
      <p id="totalCount">-</p>
    </div>
  </div>

  <!-- ======================== 📊 차트 영역 ======================== -->

  <!-- 🔹 유입경로별 유입 수 -->
  <section class="chart-section">
    <h3>📈 유입경로별 유입 수</h3>
    <canvas id="channelChart" height="140"></canvas>
    <p class="chart-desc">앱 또는 외부 채널을 통해 유입된 사용자 수를 보여줍니다.</p>
  </section>

  <!-- 🔹 주요 기능 사용률 -->
  <section class="chart-section">
    <h3>⚙️ 주요 기능 사용률</h3>
    <canvas id="featureChart" height="140"></canvas>
    <p class="chart-desc">SecuOne 주요 기능별 클릭 및 사용 빈도를 시각화합니다.</p>
  </section>

  <!-- ======================== 📋 로그 상세 테이블 ======================== -->
  <section class="table-section">
    <h3>📋 로그 상세 목록</h3>
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>이벤트 유형</th>
          <th>세션ID</th>
          <th>IP</th>
          <th>채널 / 기능명</th>
          <th>추가정보</th>
          <th>시간</th>
        </tr>
      </thead>
      <tbody id="logTbody">
        <tr>
          <td colspan="7" style="text-align:center;">📡 데이터를 불러오는 중...</td>
        </tr>
      </tbody>
    </table>
  </section>

</div>
</body>
</html>
