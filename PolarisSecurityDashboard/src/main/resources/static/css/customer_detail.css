/* =========================
   Customer Detail – Polished Theme
   ========================= */
:root{
  /* Base palette */
  --bg:#f6f8fb;
  --card:#ffffff;
  --text:#0f172a;
  --muted:#6b7280;
  --line:#e8eef6;

  /* Brand */
  --primary:#2563eb;
  --primary-600:#1d4ed8;
  --primary-700:#1e40af;

  /* States */
  --danger:#ef4444;
  --danger-600:#dc2626;
  --warn-bg:rgba(245,158,11,.10);
  --warn-fg:#7c4a00;
  --ok-bg:rgba(22,163,74,.08);
  --ok-fg:#166534;

  /* Elevation & effects */
  --radius-lg:16px;
  --radius-md:12px;
  --radius-sm:10px;
  --shadow-sm:0 4px 16px rgba(15,23,42,.06);
  --shadow-md:0 10px 28px rgba(2,8,23,.10);
  --ring:0 0 0 3px rgba(37,99,235,.18);

  /* Typography scale */
  --fz-xs:12px;
  --fz-sm:13px;
  --fz-md:14px;
  --fz-lg:18px;
  --fz-xl:20px;
}

/* Global reset-ish */
[hidden]{ display:none !important; }
*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0; color:var(--text); background:var(--bg);
  font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
               Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
}
::selection{ background:rgba(37,99,235,.16); }

/* Page wrapper */
.customer-detail{ max-width:1280px; margin:24px auto 96px; padding:0 28px; }
.customer-detail a{ color:inherit; text-decoration:none; }

/* ===== Header ===== */
/* 상단 헤더: 좌우 끝 정렬 확정 */
.detail-header{
  display: grid;
  grid-template-columns: 1fr auto; /* 왼쪽: 제목, 오른쪽: 버튼 묶음 */
  align-items: center;
  width: 100%;
  margin-bottom: 16px;
  gap: 12px;
}

/* 우측 버튼 묶음 */
.detail-actions{
  justify-self: end;            /* 오른쪽 끝 고정 */
  display: inline-flex;
  align-items: center;
  gap: 8px;
}

.detail-title{ font-weight:800; font-size:var(--fz-xl); letter-spacing:-.01em; }
.muted{ color:var(--muted); margin-left:6px; }

/* ===== Buttons ===== */
.btn{
  appearance:none; border:1px solid transparent; background:#fff; color:var(--text);
  height:40px; padding:0 14px; border-radius:12px; font-weight:700; cursor:pointer;
  display:inline-flex; align-items:center; gap:8px; text-decoration:none;
  box-shadow:var(--shadow-sm); transition:transform .18s ease, background .18s ease, box-shadow .18s ease, border-color .18s ease;
}
.btn:hover{ transform:translateY(-1px); }
.btn:active{ transform:translateY(0); }
.btn:focus-visible{ outline:none; box-shadow:var(--shadow-sm), var(--ring); }
.btn:disabled{ opacity:.6; pointer-events:none; }

.btn-sm{ height:32px; padding:0 10px; font-size:var(--fz-sm); border-radius:10px; box-shadow:none; }
.btn-primary{ background:var(--primary); color:#fff; }
.btn-primary:hover{ background:var(--primary-600); }
.btn-primary:active{ background:var(--primary-700); }
.btn-ghost{ background:#f3f4f6; border-color:#e5e7eb; color:#0f172a; }
.btn-ghost:hover{ background:#edeff3; }
.btn-danger{ background:var(--danger); color:#fff; }
.btn-danger:hover{ background:var(--danger-600); }

/* ===== Cards ===== */
.card{
  background:var(--card);
  border:1px solid var(--line);
  border-radius:var(--radius-lg);
  box-shadow:var(--shadow-md);
  padding:18px;
}
.card + .card{ margin-top:18px; }

.card-head{
  display:flex; align-items:center; justify-content:space-between; gap:12px;
  padding:4px 4px 12px; border-bottom:1px dashed #e9edf5; margin-bottom:14px;
}
.card-head h3{ margin:0; font-size:var(--fz-lg); letter-spacing:-.01em; }
.head-actions{ display:flex; align-items:center; gap:8px; flex-wrap:wrap; }
.inline{ display:inline; }

/* ===== Forms ===== */
.form-grid{
  display:grid;
  grid-template-columns:
    clamp(100px,12vw,160px) minmax(0,1fr)
    clamp(100px,12vw,160px) minmax(0,1fr);
  gap:14px 18px; align-items:center;
}
.form-grid > *{ min-width:0; }

.form-label{
  display:flex; align-items:center;
  color:var(--muted); font-size:var(--fz-sm);
  min-height:40px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}

.form-control{
  width:100%; min-width:0; height:40px; padding:8px 12px;
  border:1px solid #e5e7eb; border-radius:12px; background:#fff;
  font-size:var(--fz-md);
  transition:border-color .15s, box-shadow .15s, background .15s;
}
.form-control::placeholder{ color:#9aa3b2; }
.form-control:focus{ outline:none; border-color:var(--primary); box-shadow:var(--ring); }
.form-control[disabled], .form-control[readonly]{
  background:#f8fafc; color:#6b7280; border-color:#eef1f6;
}

/* Pretty select (keeps native, adds arrow) */
select.form-control{
  -webkit-appearance:none; -moz-appearance:none; appearance:none;
  padding-right:34px; overflow:hidden; white-space:nowrap; text-overflow:ellipsis;
  background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 20 20" fill="none" stroke="%239aa3b2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 8 10 12 14 8"/></svg>');
  background-repeat:no-repeat; background-position:right 10px center; background-size:14px;
}

textarea.form-control{ height:auto; min-height:96px; resize:vertical; }

@media (max-width:1200px){
  .form-grid{ grid-template-columns: clamp(110px,20vw,160px) minmax(0,1fr); }
}
@media (max-width:640px){
  .form-grid{ grid-template-columns: 1fr; }
  .form-label{ min-height:auto; }
}

/* Key-Value summary */
.kv{
  display:grid; grid-template-columns: 140px 1fr; gap:8px 12px;
}
.kv .key{ color:var(--muted); display:flex; align-items:center; font-size:var(--fz-sm); }
.kv .val{
  background:linear-gradient(180deg,#fbfdff, #ffffff);
  border:1px solid var(--line); border-radius:12px; padding:10px 12px;
  font-size:var(--fz-md);
}

/* ===== Accordion ===== */
.chevron-btn{
  width:34px; height:34px; display:inline-flex; align-items:center; justify-content:center;
  border:1px solid #e7ecf4; background:#fff; color:#6b7280; border-radius:10px; cursor:pointer;
  transition:transform .18s ease, background .18s ease, color .18s ease, box-shadow .18s ease;
}
.chevron-btn:hover{ background:#f3f4f6; color:#374151; transform:translateY(-1px); }
.chevron-btn:focus-visible{ outline:none; box-shadow:var(--ring); }
.chevron-btn svg{ transition:transform .18s; }
.chevron-btn[aria-expanded="false"] svg{ transform:rotate(-90deg); }

.accordion-panel{
  display:grid; grid-template-rows:1fr; overflow:hidden;
  transition:opacity .2s ease, transform .2s ease;
}
.accordion-panel:not(.show){ display:block; opacity:0; transform:translateY(-6px); height:0; padding:0; margin:0; border:0; }
.accordion-panel.show{ opacity:1; transform:none; height:auto; }

/* ===== Table ===== */
.section-body{ overflow-x:auto; } /* small screens scroll */
.table{
  width:100%; border-collapse:separate; border-spacing:0;
  border-radius:12px; overflow:hidden; border:1px solid #e9eef6;
}
.table thead th{
  background:linear-gradient(0deg,#f7f9fc,#f7f9fc),#fff;
  color:#4b5563; font-weight:700; font-size:var(--fz-sm);
  padding:12px 14px; position:sticky; top:0; z-index:1;
}
.table th, .table td{
  padding:12px 14px; border-bottom:1px solid #eef2f6; text-align:left; vertical-align:top;
}
.table tbody tr{ transition:background .12s ease; }
.table tbody tr:hover{ background:#f8fbff; }
.table .empty{ text-align:center; color:#8a94a6; padding:18px 8px; }

.customers-table .num-col{ text-align:right; }
.mono{
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
}
.strong{ font-weight:700; }
.wrap{ white-space:normal; word-break:break-word; }
.row-actions{ display:flex; gap:8px; flex-wrap:wrap; }

/* Code & badges */
.code-chip{
  display:inline-block; padding:3px 9px; border-radius:8px;
  background:#eef2ff; color:#3730a3; font-weight:700; font-size:12px; border:1px solid #e0e7ff;
}
.badge-muted{
  display:inline-block; padding:3px 9px; border-radius:8px; background:#f3f4f6; color:#6b7280; font-size:12px;
}

/* Status chips */
.chip{
  display:inline-flex; align-items:center; gap:8px; height:28px; padding:0 10px; font-size:12px;
  border-radius:999px; background:#f3f4f6; color:#334155; border:1px solid transparent;
}
.chip .dot{ width:6px; height:6px; border-radius:50%; background:#94a3b8; }
.chip--success{ background:var(--ok-bg); color:var(--ok-fg); border-color:rgba(22,163,74,.18); }
.chip--success .dot{ background:#22c55e; }
.chip--warn{ background:var(--warn-bg); color:var(--warn-fg); border-color:rgba(245,158,11,.22); }
.chip--warn .dot{ background:#f59e0b; }

/* ===== Modal ===== */
.modal{ position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:100; }
.modal.show{ display:flex; }
.modal::before{
  content:""; position:absolute; inset:0; background:rgba(2,8,23,.45);
  -webkit-backdrop-filter: blur(2px); backdrop-filter: blur(2px);
}
.modal-panel{
  position:relative; width:min(720px,92vw); max-height:90vh; overflow:auto;
  background:#fff; border-radius:16px; border:1px solid #e5e7eb;
  padding:16px;
  box-shadow:0 24px 68px rgba(2,8,23,.32);
  transform:translateY(6px) scale(.98); opacity:0;
  transition:transform .18s ease, opacity .18s ease;
}
.modal.show .modal-panel{ transform:none; opacity:1; }

.modal-header{
  display:flex; align-items:center; justify-content:space-between; gap:10px;
  padding-bottom:8px; border-bottom:1px dashed #eef2f7; margin-bottom:12px;
}
.modal-body{ display:grid; gap:12px; }
.modal-actions{ display:flex; justify-content:flex-end; gap:8px; margin-top:8px; }

.form-row{
  display:grid; grid-template-columns: 110px minmax(0,1fr);
  gap:8px 12px; align-items:center;
}
.form-row label{ font-size:var(--fz-sm); color:var(--muted); }

/* ===== Utilities ===== */
.mt-8{ margin-top:8px; }
.mt-12{ margin-top:12px; }
.mt-16{ margin-top:16px; }
.justify-end{ justify-content:flex-end; }
.gap-8{ gap:8px; }

/* ===== Nice hover for table action buttons ===== */
.table .btn.btn-sm{ box-shadow:none; }
.table .btn.btn-sm:hover{ transform:none; filter:brightness(0.98); }

/* ===== Subtle gradients for page background on wide screens ===== */
@media (min-width:900px){
  body{
    background:
      radial-gradient(80rem 40rem at 90% -10%, rgba(37,99,235,.06), transparent 50%),
      radial-gradient(60rem 35rem at -10% 0%, rgba(99,102,241,.05), transparent 45%),
      var(--bg);
  }
}
/* 그리드 전체 폭 차지 */
.form-row-span-4 { grid-column: 1 / -1; }

/* 하단 액션 가로 정렬 */
.form-actions{
  display:flex;
  justify-content: flex-end;
  gap: 8px;
}

/* 모바일에선 필요 시 세로로 자동 줄바꿈 */
@media (max-width:640px){
  .form-actions{ flex-wrap:wrap; justify-content:flex-start; }
}

/* ===== Optional dark mode (auto) ===== */
@media (prefers-color-scheme: dark){
  :root{
    --bg:#0b1020;
    --card:#0f162b;
    --text:#e6ebff;
    --muted:#9aa3b2;
    --line:#24314d;
    --shadow-sm:0 6px 18px rgba(2,8,23,.35);
    --shadow-md:0 22px 38px rgba(2,8,23,.45);
    --ring:0 0 0 3px rgba(56,123,247,.35);
  }
  .btn-ghost{ background:#151e36; border-color:#1e2a47; color:#e6ebff; }
  .chip{ background:#111a31; color:#cbd5e1; }
  .table thead th{ background:#121a2f; color:#cbd5e1; }
  .table{ border-color:#1e2a47; }
  .kv .val{ background:linear-gradient(180deg,#0f162b,#0d1426); border-color:#1e2a47; }
  .modal::before{ background:rgba(2,8,23,.6); }
  select.form-control{
    background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 20 20" fill="none" stroke="%238993a5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 8 10 12 14 8"/></svg>');
  }
}
