<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/admin_layout}">
<head>
  <meta charset="UTF-8" />
  <title>Polaris Admin Dashboard</title>
  <th:block layout:fragment="pageStyle">
    <link rel="stylesheet" th:href="@{/css/overview.css}">
  </th:block>
</head>

<body>
<div layout:fragment="content" class="overview-page">

  <!-- Breadcrumb -->
  <div class="breadcrumb">
    <a th:href="@{/admin/overview}">Dashboard</a> /
    <strong>Overview</strong>
  </div>

  <!-- KPI Section -->
  <section class="kpi-section">
    <div class="kpi-card total">
      <div class="icon">👥</div>
      <div>
        <p class="label">Total Customers</p>
        <h3 th:text="${metrics.totalCustomers}">0</h3>
        <span class="delta up">▲ 16% this month</span>
      </div>
    </div>

    <div class="kpi-card vguard">
      <div class="icon">🛡️</div>
      <div>
        <p class="label">V-Guard</p>
        <h3 th:text="${metrics.vguard}">0</h3>
        <span class="delta down">▼ 1% this month</span>
      </div>
    </div>

    <div class="kpi-card secuone">
      <div class="icon">💻</div>
      <div>
        <p class="label">SecuOne</p>
        <h3 th:text="${metrics.secuone}">0</h3>
        <span class="delta same">— this month</span>
      </div>
    </div>
  </section>

  <!-- 도메인별 통계 -->
  <section class="panel">
    <div class="panel-header">
      <h3>도메인별 통계</h3>
    </div>
    <div class="panel-body">
      <table>
        <thead>
        <tr>
          <th>Domain</th>
          <th>Count</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="d : ${logsSummary.byDomain}">
          <td th:text="${d.domain}">example.com</td>
          <td th:text="${d.count}">23</td>
        </tr>
        </tbody>
      </table>
    </div>
  </section>

  <!-- 최근 등록 고객사 -->
  <section class="panel">
    <div class="panel-header">
      <h3>최근 등록 고객사</h3>
      <a th:href="@{/admin/customers}" class="more">전체 보기</a>
    </div>
    <div class="panel-body">
      <table>
        <thead>
        <tr>
          <th>고객사명</th>
          <th>연결사</th>
          <th>생성일</th>
        </tr>
        </thead>
        <tbody>
			<tr th:each="c : ${recentCustomers}">
			  <td th:text="${c['customerName']}">폴라리스</td>
			  <td th:text="${c['connectedCompanyName'] != null ? c['connectedCompanyName'] : '-'}">-</td>
			  <td th:text="${c['createAt']}">2025-09-16</td>
			</tr>

        </tbody>
      </table>
    </div>
  </section>

</div>
</body>
</html>
