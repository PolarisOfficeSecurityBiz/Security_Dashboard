<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/admin_layout}">
<head>
  <meta charset="UTF-8" />
  <title>License Manage</title>
  <link rel="stylesheet" th:href="@{/css/admin_license.css}">
  <script defer th:src="@{/js/admin_license.js}"></script>
</head>

<body>
<div layout:fragment="content" class="license-page">

  <!-- breadcrumb -->
  <div class="breadcrumb">
    <span class="path">
      <a th:href="@{/admin/customers}" th:text="${customerName}">폴라리스테스트</a>
      <span>/</span>
      <strong>라이선스 관리</strong>
    </span>
  </div>

  <!-- ✅ 검색 필터 영역 -->
  <section class="search-bar">
    <input type="text" id="searchInput" placeholder="서비스명 / 고객사명 / 요청자명 검색">
    <select id="sdkFilter">
      <option value="">SDK 유형 (전체)</option>
      <option value="SecuOne">SecuOne SDK</option>
      <option value="RB_iOS">RB버전_iOS 포함</option>
      <option value="SDK3">SDK 3.0</option>
    </select>
    <select id="typeFilter">
      <option value="">요청 구분 (전체)</option>
      <option value="issue">발급 요청</option>
      <option value="update">수정 요청</option>
      <option value="notIssued">미발급</option>
      <option value="expiring">만료 D-30</option>
    </select>
    <button id="searchBtn">조회</button>
  </section>

  <!-- 이하 기존 테이블 패널들 동일 -->
  <section class="panel" data-type="issue">
    <div class="panel-header">
      <h3>발급 요청란</h3>
      <button class="arrow-btn">›</button>
    </div>
    <div class="panel-body">
      <table>
        <thead>
        <tr>
          <th>서비스명</th>
          <th>고객사명</th>
          <th>요청자명</th>
          <th>SDK 유형</th>
          <th>요청일자</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="item : ${issueRequests}">
          <td th:text="${item.serviceName}">A서비스</td>
          <td th:text="${item.customerName}">A고객사</td>
          <td th:text="${item.requester}">홍길동</td>
          <td th:text="${item.sdkType}">RB_iOS</td>
          <td th:text="${item.requestDate}" class="date">2025-09-23</td>
        </tr>
        </tbody>
      </table>
    </div>
  </section>

  <section class="panel" data-type="update">
    <div class="panel-header">
      <h3>수정 요청란</h3>
      <button class="arrow-btn">›</button>
    </div>
    <div class="panel-body">
      <table>
        <thead>
        <tr>
          <th>서비스명</th>
          <th>고객사명</th>
          <th>요청자명</th>
          <th>요청사항</th>
          <th>SDK 유형</th>
          <th>요청일자</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="item : ${updateRequests}">
          <td th:text="${item.serviceName}">B서비스</td>
          <td th:text="${item.customerName}">B고객사</td>
          <td th:text="${item.requester}">이돌리</td>
          <td th:text="${item.requestDetail}">SDK 변경</td>
          <td th:text="${item.sdkType}">SecuOne</td>
          <td th:text="${item.requestDate}" class="date">2025-09-23</td>
        </tr>
        </tbody>
      </table>
    </div>
  </section>

  <!-- 미발급 & 만료 D-30 2열 -->
  <section class="panel grid-2">
    <div class="panel-item" data-type="notIssued">
      <div class="panel-header">
        <h3>미발급 서비스</h3>
        <button class="arrow-btn">›</button>
      </div>
      <div class="panel-body">
        <table>
          <thead>
          <tr>
            <th>서비스명</th>
            <th>고객사명</th>
            <th>담당자명</th>
            <th>생성일자</th>
          </tr>
          </thead>
          <tbody>
          <tr>
            <td>C서비스</td>
            <td>C고객사</td>
            <td>이별잉</td>
            <td class="date">2025-09-22</td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="panel-item" data-type="expiring">
      <div class="panel-header">
        <h3>만료 D-30</h3>
        <button class="arrow-btn">›</button>
      </div>
      <div class="panel-body">
        <table>
          <thead>
          <tr>
            <th>서비스명</th>
            <th>고객사명</th>
            <th>마지막 변경일</th>
            <th>만료일</th>
          </tr>
          </thead>
          <tbody>
          <tr>
            <td>B서비스</td>
            <td>라이선스 버전 변경</td>
            <td class="date">2025-04-12</td>
            <td class="date">2025-09-22</td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>
  </section>
</div>
</body>
</html>
