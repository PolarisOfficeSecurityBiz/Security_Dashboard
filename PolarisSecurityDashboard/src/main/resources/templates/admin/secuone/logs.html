<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/admin_layout}">
<head>
  <meta charset="UTF-8" />
  <title>SecuOne 로그 통계</title>
  <link rel="stylesheet" th:href="@{/css/secuone_logs.css}">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script defer th:src="@{/js/secuone_logs.js}"></script>
</head>

<body>
<div layout:fragment="content" class="secuone-log-page">
  <div class="header">
    <div>
      <a th:href="@{/admin/secuone}">Polaris SecuOne</a> / 
      <strong>로그 통계</strong>
    </div>
  </div>

  <!-- 🔹 필터 영역 -->
  <div class="filter-bar">
    <select id="dateRange">
      <option value="1d">하루</option>
      <option value="7d">일주일</option>
      <option value="30d">한 달</option>
      <option value="custom">직접 선택</option>
    </select>
    <input type="date" id="fromDate" disabled>
    <input type="date" id="toDate" disabled>
    <button id="searchBtn">검색</button>
  </div>

  <!-- 🔹 유입경로 통계 -->
  <section class="chart-section">
    <h3>📈 유입경로별 유입 수</h3>
    <canvas id="channelChart" height="120"></canvas>
  </section>

  <!-- 🔹 주요 기능 사용률 통계 -->
  <section class="chart-section">
    <h3>⚙️ 주요 기능 사용률</h3>
    <canvas id="featureChart" height="120"></canvas>
  </section>

  <!-- 🔹 상세 로그 테이블 -->
  <section class="table-section">
    <h3>📋 로그 상세 목록</h3>
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>이벤트 유형</th>
          <th>세션ID</th>
          <th>IP</th>
          <th>채널 / 기능명</th>
          <th>추가정보</th>
          <th>시간</th>
        </tr>
      </thead>
      <tbody id="logTbody">
        <tr><td colspan="7" style="text-align:center;">데이터를 불러오는 중...</td></tr>
      </tbody>
    </table>
  </section>
</div>
</body>
</html>
