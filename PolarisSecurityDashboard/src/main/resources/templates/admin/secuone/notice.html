<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/admin_layout}">
<head>
  <meta charset="UTF-8" />
  <title>공지 관리 · SecuONE</title>

  <link rel="stylesheet" href="/css/notice.css" th:href="@{/css/notice.css}">
  <script defer src="/js/notice.js" th:src="@{/js/notice.js}"></script>
</head>
<body>
<div layout:fragment="content">
  <main style="max-width:1200px; margin:24px auto; padding:0 16px;">
    <!-- 헤더 -->
	<header class="page-head">
	  <div class="left">
	    <!-- ⬅️ 뒤로가기 아이콘 버튼 -->
	    <button id="backBtn" class="icon-btn" onclick="history.back()" aria-label="뒤로가기">
	      <img src="/images/back.png" alt="뒤로가기" />
	    </button>
	    <div class="title">공지사항 관리</div>
	  </div>
	  <div class="right">
	    <button id="createBtn" class="btn primary">+ 새 공지</button>
	  </div>
	</header>

    <!-- 툴바 -->
    <section class="toolbar">
      <div class="left" style="display:flex; gap:8px; align-items:center;">
        <input id="q" type="search" placeholder="제목/카테고리/작성자 검색…" />
        <select id="size">
          <option value="50">50개</option>
          <option value="100" selected>100개</option>
          <option value="200">200개</option>
          <option value="500">500개</option>
        </select>
        <button id="refreshBtn" type="button">새로고침</button>
      </div>
      <div class="right">
        <span id="countText">0건</span>
      </div>
    </section>

    <!-- 목록 -->
    <section class="table-wrap">
      <table class="letter-table">
        <thead>
          <tr>
            <th style="width:160px;">작성일</th>
            <th>제목</th>
            <th style="width:140px;">카테고리</th>
            <th style="width:140px;">작성자</th>
            <th style="width:90px;">이미지</th>
          </tr>
        </thead>
        <tbody id="notice-tbody"><!-- JS가 채움 --></tbody>
      </table>

      <div id="empty" class="empty">데이터가 없습니다.</div>
      <div id="error" class="error">불러오기 실패 — 콘솔을 확인하세요.</div>
      <div id="loading" class="loading">불러오는 중…</div>
    </section>
  </main>

  <!-- 모달 -->
  <div id="noticeModal" class="modal-backdrop hidden" aria-modal="true" role="dialog">
    <div class="modal" tabindex="-1" id="modalContent">
      <header>
        <div class="title" id="noticeModalTitle">공지 등록</div>
        <button id="closeModal" class="icon-btn" aria-label="닫기">✕</button>
      </header>

      <div class="body">
        <div class="row"><label for="id">ID</label><input id="id" type="text" disabled /></div>
        <div class="row"><label for="title">제목</label><input id="title" type="text" required /></div>
        <div class="row"><label for="category">카테고리</label><input id="category" type="text" /></div>
        <div class="row"><label for="author">작성자</label><input id="author" type="text" /></div>
        <div class="row"><label for="date">작성일</label><input id="date" type="text" /></div>
        <div class="row">
          <label for="imageURL">이미지 URL</label>
          <div class="thumb-wrap">
            <input id="imageURL" type="url" placeholder="https://..." />
            <img id="imgThumb" alt="미리보기" />
          </div>
        </div>
        <div class="row" style="align-items:start;">
          <label for="content" style="margin-top:6px;">내용</label>
          <textarea id="content"></textarea>
        </div>
      </div>

      <footer>
        <div><button id="deleteBtn" class="btn danger hidden">삭제</button></div>
        <div style="display:flex; gap:8px;">
          <button id="saveBtn" class="btn primary">저장</button>
          <button id="cancelBtn" class="btn ghost">취소</button>
        </div>
      </footer>
    </div>
  </div>
</div>
</body>
</html>
