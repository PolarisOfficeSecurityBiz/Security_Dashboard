<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/customer_layout}">
<head>
  <meta charset="UTF-8">
  <title>회사 정보 관리</title>
  <link rel="stylesheet" th:href="@{/css/company.css}">
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>

<body>
<main layout:fragment="content" class="company-container">

  <!-- 🧭 경로 표시 -->
  <div class="breadcrumb">
    <i class="fa fa-table-cells-large"></i>
    <span>Dashboards</span>
    <i class="fa fa-angle-right"></i>
    <span class="current">회사 정보 관리</span>
  </div>

  <!-- 🏢 고객사 정보 -->
  <section class="info-card">
    <h3>고객사 정보</h3>
    <form>
      <div class="form-group">
        <label>고객사 명</label>
        <input type="text" th:value="${customer.customerName}" readonly>
      </div>
      <div class="form-group">
        <label>연결사</label>
        <!-- 🔹 연결사 이름 표시 (UUID 대신 회사명) -->
        <input type="text" th:value="${connectedCompanyName}" readonly>
      </div>
      <div class="form-group">
        <label>생성일</label>
        <input type="text" th:value="${#temporals.format(customer.createAt, 'yyyy-MM-dd')}" readonly>
      </div>
      <div class="form-group">
        <label>등록 담당자</label>
        <input type="text" th:value="${contact.username}" readonly>
      </div>
      <div class="form-group">
        <label>이메일</label>
        <input type="text" th:value="${contact.email}" readonly>
      </div>

      <!-- ✅ 고객사 정보 수정요청 버튼 -->
      <div class="form-actions">
        <button type="button" class="btn-green" id="requestCompanyEdit">
          <i class="fa fa-pen-to-square"></i> 수정요청
        </button>
      </div>
    </form>
  </section>

  <!-- ⚙️ 담당 서비스 목록 -->
  <section class="info-card">
    <h3>담당 서비스</h3>

    <div th:if="${#lists.isEmpty(services)}" class="no-service">
      <p>등록된 서비스가 없습니다.</p>
    </div>

    <div th:each="service : ${services}" class="service-block">
      <form class="service-form">
        <div class="form-group">
          <label>서비스 명</label>
          <input type="text" th:value="${service.serviceName}" readonly>
        </div>
        <div class="form-group">
          <label>도메인</label>
          <input type="text" th:value="${service.domain}" readonly>
        </div>
        <div class="form-group">
          <label>상품유형</label>
          <input type="text" th:value="${service.productType}" readonly>
        </div>
        <div class="form-group">
          <label>CPI</label>
          <input type="text" th:value="${service.cpiValue}" readonly>
        </div>
        <div class="form-group">
          <label>RS Rate</label>
          <input type="text" th:value="${service.rsRate}" readonly>
        </div>

        <!-- ✅ 서비스 수정요청 버튼 -->
        <div class="form-actions">
          <button type="button" class="btn-green requestServiceEdit">
            <i class="fa fa-pen-to-square"></i> 수정요청
          </button>
        </div>
      </form>
    </div>
  </section>

  <!-- ✨ 수정요청 모달 (추후 JS에서 연결) -->
  <div id="editRequestModal" class="modal" style="display:none;">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h3>수정요청</h3>
      <p>수정 요청할 내용을 입력해주세요.</p>
      <textarea placeholder="예: 회사명 변경, 도메인 수정 등"></textarea>
      <div class="modal-actions">
        <button class="btn-green">요청 제출</button>
        <button class="btn-gray close">취소</button>
      </div>
    </div>
  </div>

</main>
</body>
</html>
